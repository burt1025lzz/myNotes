# 实际工作相关

------



## 一、H5 页面如何进行首屏优化

### 1. 路由懒加载

+ 适用于 SPA （ 不适用 MPA ）
+ 路由拆分，优先保证首页加载

### 2. 服务端渲染 SSR

+ 传统的前后端分离（ SPA ）渲染页面的过程复杂

+ SSR 渲染页面过程简单，所以性能好

+ 如果是纯 H5 页面，SSR 是性能优化的终极方案

+ SSR 是一门 “ 古老 ” 的技术

  1. 刚刚兴起 Web 1.0 时，就是 SSR 技术：PHP ASP JSP 等
  2. Nuxt.js（Vue）
  3. Next.js（React）

  ![image-20220330094746581](https://burt-markdown.oss-cn-shenzhen.aliyuncs.com/markdown/image-20220330094746581.png)

### 3. App 预取

+ 如果 H5 在 App WebView 中展示，可使用 App 预取

+ 用户访问列表时，App 预加载文章首屏内容

+ 用户进入 H5 页，直接从 App 中获取内容，瞬间展示首屏

  ![iShot2022-03-30_09.56.24](https://burt-markdown.oss-cn-shenzhen.aliyuncs.com/markdown/iShot2022-03-30_09.56.24.jpg)

### 4. 分页

+ 针对列表页
+ 默认只展示第一页内容
+ 上划加载更多

### 5. 图片懒加载 lazyLoad

+ 针对详情页
+ 默认只展示文本内容，然后触发图片懒加载
+ 注意：提前设置图片尺寸，尽量只重绘不重排

### 6. Hybrid

+ 提前将 HTML JS CSS 下载到 App 内部

+ 在 App webview 中使用 file:// 协议加载页面文件

+ 再用 Ajax 获取内容并展示（也结合 App 预取）

  <img src="https://burt-markdown.oss-cn-shenzhen.aliyuncs.com/markdown/image-20220330100648932.png" alt="image-20220330100648932" style="zoom: 67%;" />

### 7. 划重点

+ 服务端 SSR 是 H5 的终极优化方案（但成本也高）
+ 移动端 H5 要结合 App 能力去优化
+ 严格来说，hybrid 不是 H5，但这里回答出来没问题

### 8. 扩展

+ 性能优化要配合分析、统计、评分等，做了事情要有结果
+ 性能优化也需要配合体验，如骨架屏，loading 动画等

------

